/* ver.0.0.0 */
/*===============================================================================================================================*/
/* コメント削除                                                                                                                  */
/*                                                                                                                               */
/*                                                                                                                               */
/*===============================================================================================================================*/
/*===============================================================================================================================*/
/* 定数宣言                                                                                                                      */
/*                                                                                                                               */
/*===============================================================================================================================*/

/*===============================================================================================================================*/
/* 変数宣言                                                                                                                      */
/*                                                                                                                               */
/*===============================================================================================================================*/

/*===============================================================================================================================*/
/* 関数宣言                                                                                                                      */
/*                                                                                                                               */
/*===============================================================================================================================*/
/*===============================================================================================================================*/
/**
 * 指定されたテキストのコメントを削除します。
 *
 * @param {string} inputText    - 入力ファイルの文字列(生データ)
 * @returns {string}              入力ファイルの文字列(コメント削除済) 
 */
/*===============================================================================================================================*/
function deleteComent(inputText) {
    let noComentText = "";
    let isReteral    = false;
    
    for (let i = 0; i < inputText.length; i++){
        if (!isReteral
         && (inputText[i] == "/")
         && ((i + 1) < inputText.length)
         && (inputText[i + 1] == "/")) {            //一行コメント読み飛ばし
            i += 2;
            while ((i < inputText.length) && inputText[i] != "\n"){
                i++;
            }
            if (inputText[i] == "\n"){              //改行で終了の場合は改行の取得
                noComentText += inputText[i];
            }
        }
        else if (!isReteral
              && (inputText[i] == "/")
              && ((i + 1) < inputText.length)
              && (inputText[i + 1] == "*")){        //複数行コメント読み飛ばし
            i += 2; 
            while ((i < inputText.length)
             && !((inputText[i] == "*")
                  && ((i + 1) < inputText.length)
                  && (inputText[i + 1] == "/"))){
                i++;
            }
            if ((i < inputText.length)
             && (inputText[i] == "*")
             && ((i + 1) < inputText.length)
             && (inputText[i + 1] == "/")){
                i++;                                  //コメント終端の場合は本行(1文字)+for文のインクリメント(1文字)の計2文字分インクリメント
            }
        }
        else if ((inputText[i] == "\"") || ( inputText[i] == "\'")) {          // 文字列中("～",'～')は判定除外
            if ((inputText[i-1] != "\\")                                       // (ただし～\",～\'はトリガにせず)
              || ((inputText[i-1] == "\\") && (inputText[i-2] == "\\"))) {     // (～\\', ～\\"についてはトリガにする) ※注意("～\\\"")のような場合が未対応
                isReteral =! isReteral;
                noComentText += inputText[i];
            }
        }
        else {
            noComentText += inputText[i];
        }
    }
    
    return noComentText;
}

/*===============================================================================================================================*/
/* 変更履歴                                                                                                                      */
/*===============================================================================================================================*/
/* バージョン : 日付       : 変更者   : 変更内容                                                                                 */
/* ----------------------------------------------------------------------------------------------------------------------------- */
/* 0.0.0      : 2024/11/28 : 北原英樹 : 新規作成                                                                                 */
/*                                                                                                                               */
/*                                                                                                                               */
/*===============================================================================================================================*/
